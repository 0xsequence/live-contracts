name: "era-evm-predeploy"
version: "1"
type: "template"
description: "Deploy an approved predeployed contract to the EVM"

arguments:
  evmPredeployManager:
    type: "address"
    description: "The address of the EVM predeploy manager. For ZKSync this is 0x0000000000000000000000000000000000008014"
  address:
    type: "address"
    description: "The address of the predeployed contract to deploy"
  bytecode:
    type: "bytes"
    description: "The deployment bytecode of the predeployed contract to deploy"

skip_condition:
  - type: "contract-exists"
    arguments:
      address: "{{address}}"

actions:
  - name: "deploy"
    type: "send-transaction"
    arguments:
      to: "{{evmPredeployManager}}"
      data:
        type: "abi-encode"
        arguments:
          signature: "deployPredeployedContract(address,bytes)"
          values:
            - "{{address}}"
            - "{{bytecode}}"
